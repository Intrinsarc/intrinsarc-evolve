\lstset{frame=tb, aboveskip=12pt, belowskip=-3pt, breaklines=true, basicstyle=\small\ttfamily, tabsize=2, mathescape=true}
\begin{lstlisting}[caption={facts.als, lines 17-41}, label=alloy:top, captionpos=b]
one isTop.True
    ...
  isTrue[s.isTop] <=> no simpleDependsOn.s
\end{lstlisting}