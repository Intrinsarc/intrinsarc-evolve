\lstset{frame=tb, aboveskip=12pt, belowskip=-3pt, breaklines=true, basicstyle=\small\ttfamily, tabsize=2, mathescape=true}
\begin{lstlisting}[caption={bb\_port\_inference.als, lines 215-221}, label=alloy:propagatelinks, captionpos=b]
pred propagateInferredCompositeLinks(
  s: Stratum,
  c: Component,  
  harshFromPortToAny:  ComponentLinkEnd -> LinkEnd,
  fromPortToPort:      ComponentLinkEnd -> ComponentLinkEnd,
  partInternal:        PartLinkEnd -> PartLinkEnd,
  portToPort:          ComponentLinkEnd -> ComponentLinkEnd)
\end{lstlisting}
