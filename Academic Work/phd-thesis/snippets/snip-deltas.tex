\lstset{frame=tb, aboveskip=12pt, belowskip=-3pt, breaklines=true, basicstyle=\small\ttfamily, tabsize=2, mathescape=true}
\begin{lstlisting}[caption={base\_deltas.als, lines 5-41}, label=alloy:deltas, captionpos=b]
sig Deltas
{
  newObjects:            set Object,
  addedObjects:          set newObjects,
  replacedObjects:       set Object,
  newIDs:                set ID,
-- the adds, deletes and replaces 
  addObjects:           newIDs one -> one addedObjects,
  deleteObjects:        set ID,
  replaceObjects:       ID one -> lone replacedObjects,
-- the expanded constituents, for each stratum perspective
  objects_e: Stratum -> ID -> Object,
...
}
{
  no dom[replaceObjects] & deleteObjects
  replacedObjects = newObjects - addedObjects
}
\end{lstlisting}
